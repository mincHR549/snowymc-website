@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================= 动画定义 ================= */

/* 动态渐变动画 */
@keyframes gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* 光晕浮动动画（老版兼容） */
@keyframes float {
  0%, 100% { transform: translate3d(0,0,0); }
  50% { transform: translate3d(12px,-12px,0); }
}

/* 柔和流动渐变动画（新版） */
@keyframes gradient-smooth {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* 呼吸漂浮动画（新版） */
@keyframes float-breath {
  0%, 100% { transform: translate3d(0, 0, 0); opacity: 0.8; }
  50% { transform: translate3d(0, -15px, 0); opacity: 1; }
}

/* ================= 动画类扩展 ================= */

.animate-gradient {
  animation: gradient 16s ease-in-out infinite;
  background-size: 400% 400%;
  will-change: background-position;
}
.bg-400% { background-size: 400% 400%; }

.animate-float {
  animation: float 10s ease-in-out infinite;
  will-change: transform;
}

.animate-gradient-smooth {
  animation: gradient-smooth 20s ease-in-out infinite;
  will-change: background-position;
}

.animate-float-breath {
  animation: float-breath 8s ease-in-out infinite;
  will-change: transform, opacity;
}

/* 移动端动画降频（节流优化） */
@media (max-width: 768px) {
  .animate-gradient-smooth { animation-duration: 30s; }
  .animate-float-breath { animation-duration: 12s; }
}

/* ================= 全局样式 ================= */

html, body, #__next { height: 100%; }

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html {
  scroll-behavior: smooth;
  overflow-y: scroll;
}

/* 选择态 */
:root {
  --sel-bg: rgba(0, 0, 0, 0.08);
  --sel-fg: #000;
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, Inter, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
}
.dark :root {
  --sel-bg: rgba(255, 255, 255, 0.12);
  --sel-fg: #fff;
}
::selection {
  background: var(--sel-bg);
  color: var(--sel-fg);
}

/* 字体栈 */
html, body { font-family: var(--font-sans); }

/* 内容表面（轻薄玻璃） */
.content-surface {
  backdrop-filter: saturate(130%) contrast(105%) blur(1px);
  -webkit-backdrop-filter: saturate(130%) contrast(105%) blur(1px);
}

/* 柔化模糊 */
.blur-soft { filter: blur(80px); }

/* ================= 组件：Apple 风格 Timeline ================= */
@layer components {
  .timeline-card {
    @apply rounded-2xl px-6 py-4 border shadow transition-transform duration-150;
    background-color: rgba(255, 255, 255, 0.80);
    border-color: rgba(0, 0, 0, 0.05);
    box-shadow:
      0 1px 0 rgba(0, 0, 0, 0.06),
      0 12px 28px rgba(0, 0, 0, 0.08);
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  }
  .dark .timeline-card {
    background-color: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.10);
  }
  .timeline-card:hover {
    transform: translate3d(0, -2px, 0);
    box-shadow:
      0 1px 0 rgba(0, 0, 0, 0.06),
      0 16px 40px rgba(0, 0, 0, 0.12);
  }

  .timeline-title {
    @apply font-semibold tracking-tight;
    color: #111827;
  }
  .dark .timeline-title { color: #ffffff; }

  .timeline-desc {
    @apply mt-1 leading-relaxed;
    color: #374151;
  }
  .dark .timeline-desc { color: #d1d5db; }

  .timeline-node {
    @apply rounded-full border;
    width: 1.25rem;
    height: 1.25rem;
    background-color: #ffffff;
    border-color: rgba(0, 0, 0, 0.10);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
    position: relative;
  }
  @media (min-width: 768px) {
    .timeline-node { width: 1.5rem; height: 1.5rem; }
  }
  .dark .timeline-node {
    background-color: #0d0f10;
    border-color: rgba(255, 255, 255, 0.15);
  }

  .timeline-node-inner {
    position: absolute;
    inset: 4px;
    border-radius: 9999px;
    background-image: linear-gradient(to bottom, #e5e7eb, #d1d5db);
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.7),
      inset 0 -1px 0 rgba(0,0,0,0.18);
  }
  @media (min-width: 768px) {
    .timeline-node-inner { inset: 5px; }
  }
  .dark .timeline-node-inner {
    background-image: linear-gradient(to bottom, #151718, #1a1d1f);
  }
}

/* ================= 通用工具类 ================= */
.ease-smooth {
  transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
}

/* 柔和呼吸感 */
@keyframes breath {
  0%, 100% { opacity: 0.95; filter: brightness(1); }
  50% { opacity: 1; filter: brightness(1.15); }
}
.animate-breath {
  animation: breath 4s ease-in-out infinite;
}

/* 光泽扫过 */
.shine-text {
  position: relative;
  display: inline-block;
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.5) 50%,
    rgba(255,255,255,0) 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  animation: shine 6s linear infinite;
}

@keyframes shine {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
