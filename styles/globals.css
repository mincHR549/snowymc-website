@tailwind base;
@tailwind components;
@tailwind utilities;

/* 动态渐变动画 */
@keyframes gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* 光晕浮动动画（老版兼容） */
@keyframes float {
  0%,100% { transform: translate3d(0,0,0); }
  50% { transform: translate3d(12px,-12px,0); }
}

/* 柔和流动渐变动画（新版） */
@keyframes gradient-smooth {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* 呼吸漂浮动画（新版） */
@keyframes float-breath {
  0%, 100% { transform: translate3d(0, 0, 0); opacity: 0.8; }
  50% { transform: translate3d(0, -15px, 0); opacity: 1; }
}

/* Tailwind 动画类扩展（保留你原有的命名） */
.animate-gradient {
  animation: gradient 16s ease-in-out infinite;
  background-size: 400% 400%;
  will-change: background-position;
}
.bg-400% { background-size: 400% 400%; }

.animate-float {
  animation: float 10s ease-in-out infinite;
  will-change: transform;
}

.animate-gradient-smooth {
  animation: gradient-smooth 20s ease-in-out infinite;
  will-change: background-position;
}

.animate-float-breath {
  animation: float-breath 8s ease-in-out infinite;
  will-change: transform, opacity;
}

@media (max-width: 768px) {
  .animate-gradient-smooth {
    animation-duration: 30s; /* 慢速渐变，节省性能 */
  }
  .animate-float-breath {
    animation-duration: 12s; /* 减慢呼吸节奏 */
  }
}

/* 页面全高布局支持 */
html, body, #__next {
  height: 100%;
}

/* 字体渲染优化 */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 平滑滚动与滚动条稳定 */
html {
  scroll-behavior: smooth;
  overflow-y: scroll;
}

/* 选择态（更克制） */
:root {
  --sel-bg: rgba(0, 0, 0, 0.08);
  --sel-fg: #000;
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, Inter, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
}
.dark :root {
  --sel-bg: rgba(255, 255, 255, 0.12);
  --sel-fg: #fff;
}
::selection {
  background: var(--sel-bg);
  color: var(--sel-fg);
}

/* 字体栈：系统优先（SF 系） */
html, body {
  font-family: var(--font-sans);
}

/* 内容表面（轻薄玻璃） */
.content-surface {
  backdrop-filter: saturate(130%) contrast(105%) blur(1px);
  -webkit-backdrop-filter: saturate(130%) contrast(105%) blur(1px);
}

/* 柔化版模糊（性能优化） */
.blur-soft {
  filter: blur(80px);
}

/* Apple 风格 Timeline 组合类 */
@layer components {
  .timeline-card {
    @apply rounded-2xl px-6 py-4 border shadow transition-transform duration-150;
    /* 背景（浅色） */
    background-color: rgba(255, 255, 255, 0.80); /* 等价 bg-white/80，避免 bg-white/78 报错 */
    /* 边框与阴影（克制） */
    border-color: rgba(0, 0, 0, 0.05); /* 等价 border-black/5 */
    box-shadow:
      0 1px 0 rgba(0, 0, 0, 0.06),
      0 12px 28px rgba(0, 0, 0, 0.08);
    /* Apple-like 缓动 */
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  }
  .dark .timeline-card {
    background-color: rgba(255, 255, 255, 0.06); /* 等价 dark:bg-white/[0.06] */
    border-color: rgba(255, 255, 255, 0.10);      /* 等价 dark:border-white/10 */
  }
  .timeline-card:hover {
    transform: translate3d(0, -2px, 0);
    box-shadow:
      0 1px 0 rgba(0, 0, 0, 0.06),
      0 16px 40px rgba(0, 0, 0, 0.12);
  }

  .timeline-title {
    @apply font-semibold tracking-tight;
    color: #111827; /* text-neutral-900 */
  }
  .dark .timeline-title { color: #ffffff; }

  .timeline-desc {
    @apply mt-1 leading-relaxed;
    color: #374151; /* text-neutral-700 */
  }
  .dark .timeline-desc { color: #d1d5db; /* text-neutral-300 */ }

  .timeline-node {
    @apply rounded-full border;
    width: 1.25rem;  /* w-5 */
    height: 1.25rem; /* h-5 */
    background-color: #ffffff; /* bg-white */
    border-color: rgba(0, 0, 0, 0.10); /* border-black/10 */
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
    position: relative;
  }
  @media (min-width: 768px) {
    .timeline-node { width: 1.5rem; height: 1.5rem; } /* md:w-6 md:h-6 */
  }
  .dark .timeline-node {
    background-color: #0d0f10;                    /* 深色节点底 */
    border-color: rgba(255, 255, 255, 0.15);      /* dark:border-white/15 */
  }

  .timeline-node-inner {
    position: absolute;
    inset: 4px;       /* inset-[4px] */
    border-radius: 9999px;
    background-image: linear-gradient(to bottom, #e5e7eb, #d1d5db); /* from-neutral-200 to-neutral-300 */
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.7),
      inset 0 -1px 0 rgba(0,0,0,0.18);
  }
  @media (min-width: 768px) {
    .timeline-node-inner { inset: 5px; }
  }
  .dark .timeline-node-inner {
    background-image: linear-gradient(to bottom, #151718, #1a1d1f);
  }
}

/* 统一动效曲线（通用工具类，可在组件中使用） */
.ease-smooth {
  transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
}

/* 移动端动画降频（进一步节流） */
@media (max-width: 768px) {
  .animate-gradient-smooth { animation-duration: 40s; }
}
